"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7536],{1224:function(e,a,l){l.r(a),l.d(a,{default:function(){return m}});var n=l(9894),i=l(8785),t=l(1233);const s=e=>JSON.stringify({allowedMimeTypes:e.allowedMimeTypes,placeholderInitials:e.placeholderInitials,url:e.url});var r=e=>'\n  <div class="border-box width-100 height-100 border-all radius-circle border-thick row horz-align-center vert-align-middle" style="\n      background-color: '.concat(e.url?"#FBFBFB":"var(--avatar-placeholder-light)",";\n      border-color: ").concat(e.url?"#E2E2E2":"var(--avatar-placeholder-dark)",';">\n    ').concat(e.url?"":'\n      <span style="color: var(--avatar-placeholder-dark);" aria-hidden="true" class="cmpt-avatar-initials">\n        '.concat(e.placeholderInitials,"\n      </span>\n    "),"\n  </div>\n  ").concat(e.url?'\n    <img style="object-fit: cover;" class="'.concat(e.isUploading?"transparent":"",' absolute top left block radius-circle width-100 height-100" src="').concat(e.url,'">\n  '):"","\n\n  ").concat(e.isEditable?'\n    <input\n        class="hidden"\n        type="file"\n        id="profile-image-input"\n        data-name="PROFILE_IMAGE_INPUT"      \n        '.concat(Array.isArray(e.allowedMimeTypes)?'accept="'.concat(e.allowedMimeTypes.join(","),'"'):"","\n        data-detail='").concat(s(e),"'\n        ").concat(e.isUploading?"disabled":"",'\n        name="image"\n    >\n    <div\n      style="transform: translateY(30%) translateX(-50%); left: 50%;"\n      class="row nowrap vert-align-middle absolute bottom ').concat(e.url&&!e.isUploading?"btn-group":"",'"\n    >').concat(e.isUploading?'\n      <div\n        style="left: 50%; margin-left: -2.5px;"\n        class="absolute loader-bars loader-small">\n      </div>':"","\n      ").concat(e.url&&!e.isUploading?'\n        <button\n          type="button"\n          data-detail=\''.concat(s(e),'\'\n          data-name="PROFILE_IMAGE_DELETE"\n          class="').concat(e.deleting?"bg-red-light border-red":"",' hover-bg-red-light btn-white btn-xsmall"\n        >\n          <i class="icon-small icon-trash"></i>\n        </button>\n      '):"",'\n      <label\n        class="btn-white btn-xsmall"\n        for="profile-image-input"\n        aria-label="').concat(null===e.url?"Upload":"Change",' image"\n      >\n        <i class="').concat(e.isUploading?"invisible":"",' icon-small icon-camera-charcoal"></i>\n      </label>\n    </div>\n    ').concat(e.deleting?(e=>'  \n  <div\n    style="width: 300px;"\n    class="bg-white margin-top-small radius-small z-top absolute shadow-light border-gray-light border-box padding-small"\n  >\n    <h4 class="text-2">\n      Are you sure you want to delete your profile picture?\n    </h4>\n    <div class="text-left row vert-align-middle margin-top-xsmall">\n      <button\n        type="button"\n        class="btn-white"\n        data-name="PROFILE_IMAGE_DELETE_CANCEL"\n      >Cancel</button>\n      <button\n        type="button"\n        class="btn-white color-red margin-left-xsmall"\n        data-name="PROFILE_IMAGE_DELETE_CONFIRM"\n        style="border-color: #F4776D;"\n      >\n        '.concat(e.processing?"Deleting...":"Confirm & Delete","\n      </button>\n      ").concat(e.processing?'\n        <span class="loader-bars horz-align-right loader-small margin-left-large"></span>\n      ':"","\n    </div>\n  </div>\n"))(e):"","\n   "):"","\n"),o=l(6848),c=l(5390),d=l(2385);const p=new c.Z,g=()=>(0,n.y0)().profile.profileImage,b=e=>(0,n.IW)({profile:{...(0,n.y0)().profile,profileImage:{...(0,n.y0)().profile.profileImage,...e}}});var m=async e=>{switch(e.name){case"change:PROFILE_IMAGE_INPUT":{const a=e.originalEvent.target.files;if(1!==a.length)return;const l=a.item(0);b({...e.detail,isEditable:!0,isUploading:!0}),(0,n.sY)("profile-image-editable-swappable",r(g())),(0,n.sY)("field-message-image","");const s=new FormData;let c;s.append("image",l),(0,i.Z)("UPLOAD_PROFILE_IMAGE",{data:s});try{c=await p.upload(l,"profile_image")}catch(e){return void(0,t.Z)(e,"UPLOAD_PROFILE_IMAGE",{},!1)}const d=await c.json();b({url:d.file.url,isUploading:!1}),(0,n.sY)("field-message-image",(0,o.Z)({type:"success",message:"Image uploaded and saved successfully"})),(0,n.sY)("profile-image-editable-swappable",r(g())),(0,n.sY)("profile-image-swappable",r({...g(),isEditable:!1}));break}case"click:PROFILE_IMAGE_DELETE":b({...e.detail,isEditable:!0,deleting:!0}),(0,n.sY)("profile-image-editable-swappable",r(g()));break;case"click:PROFILE_IMAGE_DELETE_CONFIRM":b({processing:!0}),(0,n.sY)("profile-image-editable-swappable",r(g())),(0,i.Z)("DELETE_PROFILE_IMAGE");break;case"click:PROFILE_IMAGE_DELETE_CANCEL":b({processing:!1,deleting:!1}),(0,n.sY)("profile-image-editable-swappable",r(g()));break;case"request:DELETE_PROFILE_IMAGE_SUCCESS":b({url:!1,processing:!1,deleting:!1}),(0,n.sY)("field-message-image",(0,o.Z)({type:"success",message:"Image deleted successfully"})),(0,n.sY)("profile-image-editable-swappable",r(g())),(0,n.sY)("profile-image-swappable",r({...g(),isEditable:!1}));break;case"request:UPLOAD_PROFILE_IMAGE_ERROR":413===e.detail.status&&(e.detail.fieldErrors.image=["This image is too large. Please use an image with a maximum size of 1 MB."]),(0,d.Z)("PROFILE_FORM",e.detail.fieldErrors),b({isUploading:!1}),(0,n.sY)("profile-image-editable-swappable",r(g()))}}}}]);