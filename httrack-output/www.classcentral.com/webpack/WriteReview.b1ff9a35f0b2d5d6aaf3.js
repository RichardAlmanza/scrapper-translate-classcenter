"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5191],{8117:function(e,t){t.Z=e=>'\n  <button\n    class="'.concat(e.isLoading?" processing ":"").concat(e.style?e.style:"btn-blue"," btn-").concat(e.size||"large",' relative"\n    type="').concat(e.type?e.type:"submit",'"').concat(e.isLoading?" disabled":"","\n  >\n    ").concat(e.isLoading?'<span\n        class="loader-bars '.concat(e.loaderStyle?e.loaderStyle:"loader-white",' loader-small absolute"\n        style="left: 50%; margin-left: -2.5px;"\n      ></span>\n      <span class="invisible">').concat(e.label,"</span>"):e.label,"\n  </button>\n")},5097:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var o,n,a=r(8785),i=r(5982),s=r(9894),l=r(8117),d=e=>{let{value:t,name:r}=e;return'\n  <input\n    type="number"\n    data-name="INPUT_NUMBER"\n    name="'.concat(r,'"\n    style="width: 60px;"\n    class="input-white input-small"\n    value="').concat(t,'"\n  />\n')},c=r(3443),u="function"==typeof Map?new Map:(o=[],n=[],{has:function(e){return o.indexOf(e)>-1},get:function(e){return n[o.indexOf(e)]},set:function(e,t){-1===o.indexOf(e)&&(o.push(e),n.push(t))},delete:function(e){var t=o.indexOf(e);t>-1&&(o.splice(t,1),n.splice(t,1))}}),f=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(o){f=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function p(e){var t=u.get(e);t&&t.destroy()}function v(e){var t=u.get(e);t&&t.update()}var E=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((E=function(e){return e}).destroy=function(e){return e},E.update=function(e){return e}):((E=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return function(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!u.has(e)){var t,r=null,o=null,n=null,a=function(){e.clientWidth!==o&&d()},i=function(t){window.removeEventListener("resize",a,!1),e.removeEventListener("input",d,!1),e.removeEventListener("keyup",d,!1),e.removeEventListener("autosize:destroy",i,!1),e.removeEventListener("autosize:update",d,!1),Object.keys(t).forEach((function(r){e.style[r]=t[r]})),u.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",i,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",d,!1),window.addEventListener("resize",a,!1),e.addEventListener("input",d,!1),e.addEventListener("autosize:update",d,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",u.set(e,{destroy:i,update:d}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),r="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(r)&&(r=0),d()}function s(t){var r=e.style.width;e.style.width="0px",e.style.width=r,e.style.overflowY=t}function l(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+r+"px",o=e.clientWidth,t.forEach((function(e){e.node.scrollTop=e.scrollTop})),n&&(document.documentElement.scrollTop=n)}}function d(){l();var t=Math.round(parseFloat(e.style.height)),r=window.getComputedStyle(e,null),o="content-box"===r.boxSizing?Math.round(parseFloat(r.height)):e.offsetHeight;if(o<t?"hidden"===r.overflowY&&(s("scroll"),l(),o="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==r.overflowY&&(s("hidden"),l(),o="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),n!==o){n=o;var a=f("autosize:resized");try{e.dispatchEvent(a)}catch(e){}}}}(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],p),e},E.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],v),e});var h=E;const w=()=>(0,s.y0)().review,m=e=>(0,s.IW)({review:{...w(),...e}});m({form:{effort:parseInt((0,c.px)("[name=effort]").then((e=>e.value)),10)||0}});var b=e=>{switch(e.name){case"load:WRITEREVIEW_MODULE":h(document.querySelectorAll("[name=review-text]"));break;case"input:INPUT_NUMBER":{const t=parseInt(e.target.value,10);m({form:{...w().form,effort:t>40?40:t||t<0?0:t}});break}case"click:INCREMENT":{const e=w().form.effort+1;m({form:{...w().form,effort:e>40?40:e}}),(0,s.sY)("effort",d({name:"effort",value:w().form.effort}));break}case"click:DECREMENT":{const e=w().form.effort-1;m({form:{...w().form,effort:e<0?0:e}}),(0,s.sY)("effort",d({name:"effort",value:w().form.effort}));break}case"submit:REVIEW_FORM":{let t;e.originalEvent.preventDefault();const r={},o={user:(0,s.y0)().user};e.detail.cohortId&&(o.cohortId=e.detail.cohortId,t="UPDATE_CREATE_COHORT_REVIEW"),e.detail.courseId&&(o.courseId=e.detail.courseId,t="UPDATE_CREATE_REVIEW"),e.detail.reviewId&&(e.detail.cohortId||(o.reviewId=e.detail.reviewId),r.reviewId=e.detail.reviewId),m({redirect:e.detail.redirect,buttonLabel:"".concat(e.detail.reviewId?"Update":"Submit"," Review")}),(0,s.sY)("review-submit-button",(0,l.Z)({label:w().buttonLabel,isLoading:!0}));new FormData(e.originalEvent.target).forEach(((e,t)=>r[t]=e));const n=y(r);n.hasErrors?((0,c.b0)("REVIEW_FORM",n.errors),(0,s.sY)("review-submit-button",(0,l.Z)({label:w().buttonLabel,isLoading:!1})),window.scroll({top:document.querySelector("[data-name=REVIEW_FORM]").offsetTop-150,left:0,behavior:"smooth"})):(window.CC.trackGA({category:"".concat(e.detail.reviewId?"Update":"Create"," Review"),action:t,label:e.detail.courseId||e.detail.cohortId}),delete r.reviewRequired,(0,a.Z)(t,{parameters:o,data:r}));break}case"request:UPDATE_CREATE_COHORT_REVIEW_SUCCESS":case"request:UPDATE_CREATE_REVIEW_SUCCESS":e.detail.json.success?window.location.href="".concat((0,s.y0)().review.redirect,"?review-id=").concat(e.detail.json.message):((0,i.W)("notification","SHOW",{type:"error",title:"Some error occurred",body:e.detail.json.message,delay:7e3}),(0,s.sY)("review-submit-button",(0,l.Z)({label:"".concat(e.detail.originalParameters.reviewId?"Update":"Submit"," Review"),isLoading:!1})));break;case"request:UPDATE_CREATE_COHORT_REVIEW_ERROR":case"request:UPDATE_CREATE_REVIEW_ERROR":var t;(0,i.W)("notification","SHOW",{type:"error",title:"Some error occurred",body:(null===(t=e.detail.json)||void 0===t?void 0:t.message)||"There was an error on our end. Please try again.",delay:7e3}),(0,s.sY)("review-submit-button",(0,l.Z)({label:"".concat(e.detail.originalParameters.reviewId?"Update":"Submit"," Review"),isLoading:!1}))}};const y=e=>{const t={hasErrors:!1,errors:{}};(!e.rating||!(e.rating>=1))&&(t.errors.rating=["Rating is required."],t.hasErrors=!0);const r=e.reviewRequired&&"true"===e.reviewRequired,o=(0,c.xb)(e.reviewText)?0:e.reviewText.replace(/ +(?= )/g,"").trim().length;return r&&o<100&&(t.errors.reviewText=["Your review must be at least 100 characters long."],t.hasErrors=!0),o>6e4&&(t.errors.reviewText=["Your review must be less than 60,000 characters long."],t.hasErrors=!0),t}}}]);